(this.webpackJsonpmanagmentapp=this.webpackJsonpmanagmentapp||[]).push([[0],{122:function(e,a,t){e.exports=t.p+"static/media/llanerologo.e30c99a4.svg"},185:function(e,a,t){},250:function(e,a,t){e.exports=t(502)},260:function(e,a,t){},334:function(e,a,t){},432:function(e,a,t){},433:function(e,a,t){},478:function(e,a,t){},479:function(e,a,t){},502:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(4),c=t.n(l),o=t(45),i=t(67),s=t(3),m=(t(260),t(503)),d=t(77),u=t(21),p=t(514),E=t(515),g=t(516),b=t(517),h=t(518),y=t(519),O=t(122),k=t.n(O),f=t(32),v=t(33);var j=t(35),I=t.n(j);const C={0:"articles",1:"stocks",2:"orders",3:"sales",4:"users"},T=(e,a,t,n,r,l,c)=>(console.log(e,a,n,l,c),o=>{o(w());const i={headers:{Authorization:"Token ".concat(a)}};let s="";(n||r||l||c)&&(s="".concat(n?"search=".concat(n,"&"):"").concat(r?"page=".concat(r,"&"):"").concat(l?"order=".concat(l):""));const m=C[t],d=e>0?"http://127.0.0.1:8000/api/".concat(m,"/").concat(e,"/"):"http://127.0.0.1:8000/api/".concat(m,"?").concat(s);I.a.get(d,i).then(a=>{console.log(a),o(P(e?2:1,a.data))}).catch(e=>{o(D(e.response))})}),x=(e,a,t,n)=>r=>{const l={headers:{Authorization:"Token ".concat(n)}},c=C[e];console.log("http://127.0.0.1:8000/api/".concat(c,"/").concat(a,"/")),I.a.patch("http://127.0.0.1:8000/api/".concat(c,"/").concat(a,"/"),t,l).then(a=>{r(T(0,n,e))}).catch(e=>{r(D(e.response.data))})},A=e=>({type:"UPDATE_FILTER",filter:e}),_=e=>({type:"UPDATE_PAGINATION",pagination:e}),S=e=>({type:"UPDATE_ORDER",order:e}),w=()=>({type:"API_START"}),D=e=>({type:"API_FAIL",error:e}),P=(e,a)=>({type:"API_SUCCESS",data:a,dataType:e}),L=(e,a)=>({type:"API_GET_TOTALS",stockTotal:e,priceTotal:a}),N=e=>({type:"API_GET_EARNINGS",earnings:e});function R(){const e=Object(f.a)(["\n    color: black;\n    text-decoration: none;\n    height: 100%;\n    padding: 16px 10px;\n    border-bottom: 4px solid transparent;\n    box-sizing: border-box;\n    display: block;\n    :hover {\n      background-color: #1976d2;\n      color: #ffffff;\n    }\n    &.active {\n      background-color: #40A4C8;\n      border-bottom: 4px solid #40a4c8;\n    }\n  }\n  @media (max-width: 500px) {\n    color: black;\n    width: 100%;\n    display: block;\n    &.active {\n      color: #40A4C8;\n      background-color: white;\n      border-bottom: none;\n    }\n  }\n"]);return R=function(){return e},e}function F(){const e=Object(f.a)(["\n  margin: 0;\n  display: flex;\n  height: 100%;\n  width: auto;\n  align-items: center;\n\n  @media (max-width: 500px) {\n    margin: 0;\n    display: block;\n    width: 100%;\n  }\n"]);return F=function(){return e},e}const U=v.a.li(F()),q=Object(v.a)(o.b)(R());var B=e=>{const a=Object(s.b)();return r.a.createElement(U,null,r.a.createElement(q,{onClick:()=>a({type:"TOGGLE_SIDEDRAWER"}),to:e.link,className:e.active?"active":null},e.children))};const z=(e,a,t)=>({type:"AUTH_SUCESS",token:e,username:a,is_admin:t}),G=e=>({type:"AUTH_FAIL",error:e}),M=()=>(localStorage.removeItem("user"),localStorage.removeItem("expirationDate"),localStorage.removeItem("username"),localStorage.removeItem("admin"),{type:"AUTH_LOGOUT"}),H=e=>a=>{setTimeout(()=>{a(M())},1e3*e)},K=()=>e=>{const a=localStorage.getItem("token"),t=localStorage.getItem("username"),n=localStorage.getItem("admin");if(void 0===a)e(M());else{const r=new Date(localStorage.getItem("expirationDate"));r<=new Date?e(M()):(e(z(a,t,n)),e(H((r.getTime()-(new Date).getTime())/1e3)))}};function $(){const e=Object(f.a)(["\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: 500px) {\n    flex-flow: column;\n    &.desktopOnly {\n      display: none;\n    }\n  }\n"]);return $=function(){return e},e}const W=v.a.ul($());var V=e=>{const a=Object(s.b)(),t=Object(s.c)(e=>e.auth.admin);return r.a.createElement(W,{className:e.desktop?"desktopOnly":null},r.a.createElement(B,{link:"/"},"Inventario"),"true"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{link:"/orders"},"Pedidos"),r.a.createElement(B,{link:"/history"},"Historial"),r.a.createElement(B,{link:"/analytics"},"Estadisticas"),r.a.createElement(B,{link:"/admin"},"Admin")):null,r.a.createElement("a",{onClick:()=>a(M()),style:{color:"black",height:"100%",width:"100%",padding:"16px 10px",borderBottom:"4px solid transparent",boxSizing:"border-box"}},"Salir"))};function Y(){const e=Object(f.a)(["\n  background-color: trasparent;\n  padding: 8px;\n  height: 100%;\n  box-sizing: border-box;\n\n  img {\n    height: 100%;\n  }\n"]);return Y=function(){return e},e}const X=v.a.div(Y());var J=e=>r.a.createElement(X,{style:{height:e.height,marginBottom:e.margin}},r.a.createElement("img",{src:k.a,alt:"Llanero Sales, bikers like you"}));function Q(){const e=Object(f.a)(["\n  width: 40px;\n  height: 100%;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-around;\n  align-items: center;\n  padding: 10px 0;\n  box-sizing: border-box;\n  div {\n    width: 90%;\n    height: 4px;\n    background-color: #1976d2;\n  }\n  @media (min-width: 500px) {\n    display: none;\n  }\n"]);return Q=function(){return e},e}function Z(){const e=Object(f.a)(["\n  height: 56px;\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background-color: #ffffff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  box-sizing: border-box;\n  z-index: 90;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n"]);return Z=function(){return e},e}const ee=v.a.header(Z()),ae=v.a.div(Q());var te=e=>r.a.createElement(ee,{className:"responsiveNav",onClick:e.onToggle},r.a.createElement(J,{height:"100%"}),r.a.createElement(ae,null,r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement(V,{desktop:!0}));function ne(){const e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  z-index: 2;\n"]);return ne=function(){return e},e}v.a.div(ne());function re(){const e=Object(f.a)(["\n  position: fixed;\n  width: 280px;\n  max-width: 70%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  z-index: 200;\n  background-color: white;\n  padding: 32px 16px;\n  box-sizing: border-box;\n  transition: transform 0.3s ease-out;\n  @media (min-width: 500px) {\n    display: none;\n  }\n  &.open {\n    transform: translateX(0);\n  }\n  &.close {\n    transform: translateX(-100%);\n  }\n"]);return re=function(){return e},e}const le=v.a.div(re());var ce=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{className:e.open?"open":"close"},r.a.createElement(J,{height:"11%",margin:"20px"}),r.a.createElement("nav",null,r.a.createElement(V,null))));const oe=m.a.Header,ie=m.a.Sider,se=m.a.Content;var me=e=>{const a=Object(s.c)(e=>e.api.sideDrawer),t=Object(s.c)(e=>e.api.title),n=Object(s.c)(e=>e.auth.admin),l=(Object(s.c)(e=>e.api.selectedTab),Object(s.b)());return r.a.createElement(m.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{onToggle:()=>l({type:"TOGGLE_SIDEDRAWER"})}),r.a.createElement(ce,{open:a}),r.a.createElement(ie,{breakpoint:"sm",theme:"light",className:"responsiveDrawer"},r.a.createElement("div",null,r.a.createElement("img",{src:k.a,alt:"Llanero Logo",className:"logo",style:{width:"50%",marginLeft:"25%",marginTop:"1rem",marginBottom:"1rem"}})),"true"===n?r.a.createElement(d.a,{mode:"inline",defaultSelectedKeys:["1"],theme:"light"},r.a.createElement(d.a.Item,{key:"1",onClick:()=>l({type:"RESET_ORDER_FILTER"})},r.a.createElement(o.c,{to:"/"},r.a.createElement(p.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Inventario"))),r.a.createElement(d.a.Item,{key:"2",onClick:()=>l({type:"RESET_ORDER_FILTER"})},r.a.createElement(o.c,{to:"/orders"},r.a.createElement(E.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Pedidos"))),r.a.createElement(d.a.Item,{key:"3",onClick:()=>l({type:"RESET_ORDER_FILTER"})},r.a.createElement(o.c,{to:"/history"},r.a.createElement(g.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Historial"))),r.a.createElement(d.a.Item,{key:"4",onClick:()=>l({type:"RESET_ORDER_FILTER"})},r.a.createElement(o.c,{to:"/analytics"},r.a.createElement(b.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Estadisticas"))),r.a.createElement(d.a.Item,{key:"5",onClick:()=>l({type:"RESET_ORDER_FILTER"})},r.a.createElement(o.c,{to:"/admin"},r.a.createElement(h.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Admin")))):r.a.createElement(d.a,{mode:"inline",defaultSelectedKeys:["1"],theme:"light"},r.a.createElement(d.a.Item,{key:"1"},r.a.createElement(o.c,{to:"/"},r.a.createElement(p.a,{style:{verticalAlign:"baseline"}}),r.a.createElement("span",null,"Inventario"))," ")," ")),r.a.createElement(m.a,null,r.a.createElement(oe,{style:{background:"#fff",padding:0},className:"responsiveHeader"},r.a.createElement(u.a,{shape:"round",style:{float:"right",marginTop:"16px",marginRight:"16px"},icon:r.a.createElement(y.a,{style:{verticalAlign:"baseline"}}),onClick:()=>l(M())},"Salir"),t||""),r.a.createElement(se,{className:"responsiveContent",style:{padding:"24px"}},e.children)))},de=t(25),ue=t(12),pe=t(512),Ee=t(513),ge=t(505);const be=(e,a=null)=>({type:"MODAL_OPEN",modalID:e,payload:a});t(185),t(334);var he=e=>{const a=r.a.useState([]),t=Object(ue.a)(a,2),n=t[0],l=t[1],c=r.a.useState(null),o=Object(ue.a)(c,2),i=o[0],m=o[1],d=Object(s.c)(e=>e.api.filter),u=Object(s.c)(e=>e.api.pagination),p=Object(s.c)(e=>e.api.order),E=Object(s.c)(e=>e.api.count),g=Object(s.c)(e=>e.api.loading),b=Object(s.c)(e=>e.api.stockTotal),h=Object(s.c)(e=>e.api.priceTotal),y=r.a.useState(0),O=Object(ue.a)(y,2),k=O[0],f=O[1],v=r.a.useState(0),j=Object(ue.a)(v,2),C=j[0],x=j[1],w=Object(s.c)(e=>e.auth.token),P=Object(s.c)(e=>e.api.dataList),N=Object(s.c)(e=>e.api.updated),R=Object(s.c)(e=>e.auth.admin),F=Object(s.b)();if(P&&N){const e=[...P.results];let a=[],t=0,n=0;e.map((e,l)=>{const c=new Date(e.created_at),o="".concat(c.getDate(),"/").concat(c.getMonth()+1,"/").concat(c.getFullYear()),i=r.a.createElement("div",{className:"actionContainer"},e.quantity>0?r.a.createElement("div",{className:"actionBtn",onClick:()=>F(be(2,{key:l,id:e.id}))},r.a.createElement("span",null,"Vender articulo"),r.a.createElement("i",{className:"material-icons"},"add_shopping_cart")):null,r.a.createElement("div",{className:"actionBtn",onClick:()=>F(be(3,e.id))},r.a.createElement("span",null,"Agregar stock"),r.a.createElement("i",{className:"material-icons"},"note_add")),r.a.createElement("div",{className:"actionBtn",onClick:()=>F(be(1,{key:l,id:e.id}))},r.a.createElement("span",null,"Editar articulo"),r.a.createElement("i",{className:"material-icons"},"edit")),r.a.createElement("div",{className:"actionBtn",onClick:()=>F(be(4,l))},r.a.createElement("span",null,"Detalle stock"),r.a.createElement("i",{className:"material-icons"},"calendar_today")),r.a.createElement("div",{className:"actionBtn",onClick:()=>F(be(5,e.id))},r.a.createElement("span",null,"Borrar articulo"),r.a.createElement("i",{className:"material-icons"},"cancel")),e.link.length>1?r.a.createElement("div",{className:"actionBtn",onClick:()=>U(e.link)},r.a.createElement("span",null,"Copiar link de MercadoLibre"),r.a.createElement("i",{className:"material-icons"},"link")):null);delete e.created_at;const s=Object(de.a)({},e,{actions:i,created_at:o});a.push(s),t+=e.quantity,n+=parseFloat(e.cost)*parseInt(e.quantity)}),l(a),f(t),x(n),F((e=>a=>{const t={headers:{Authorization:"Token ".concat(e)}};I.a.get("http://127.0.0.1:8000/api/getTotals",t).then(e=>{a(L(e.data.stock_total,e.data.price_total))}).catch(e=>{a(D(e.response.data))})})()),F({type:"API_UPDATED"})}const U=e=>{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),pe.a.success("El link ha sido copiado exitosamente!",2)},q=(e,a)=>{switch(e){case"search":F(A(a));break;case"pagination":F(_(a));break;case"order":F(S(a));break;default:return}};r.a.useEffect(()=>{F(T(0,w,0,d,u,p))},[d,u,p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a.Search,{onChange:e=>{return a=e.target.value,i&&clearTimeout(i),void m(setTimeout((function(e){q("search",e)}),1500,a));var a}}),r.a.createElement(ge.a,{dataSource:n,rowKey:"id",onChange:(e,a,t)=>{if(u!==e.current)q("pagination",e.current);else{const e="".concat("descend"===t.order?"-":"").concat(t.field);q("order",e)}},pagination:{pageSize:20,total:E},style:{overflow:"auto"},loading:g},r.a.createElement(ge.a.Column,{title:"Nombre",dataIndex:"name",key:"name",sorter:!0}),r.a.createElement(ge.a.Column,{title:"SKU",dataIndex:"sku",key:"sku",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Ubicacion",dataIndex:"location",key:"location",sorter:!0}),"true"===R?r.a.createElement(ge.a.Column,{title:"Costo",dataIndex:"cost",key:"cost"}):null,r.a.createElement(ge.a.Column,{title:"Precio",dataIndex:"suggested_price",key:"suggested_price",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Stock",dataIndex:"quantity",key:"quantity"}),r.a.createElement(ge.a.Column,{title:"Imagen",dataIndex:"image",key:"image",render:e=>r.a.createElement("img",{src:e,width:"64px",onClick:()=>F(be(7,e))})}),r.a.createElement(ge.a.Column,{title:"Fecha",dataIndex:"created_at",key:"created_at",sorter:!0}),"true"===R?r.a.createElement(ge.a.Column,{title:"Acciones",dataIndex:"actions",key:"actions"}):null),"true"===R?r.a.createElement("div",null,"Stock total: ",k," / ",b):null,"true"===R?r.a.createElement("div",null,"Precio total: $",C," / $",h):null,"true"===R?r.a.createElement("span",{onClick:()=>F(be(1)),className:"floatingBtn"},"+"):null)};t(432);var ye=e=>{const a=r.a.useState([]),t=Object(ue.a)(a,2),n=t[0],l=t[1],c=r.a.useState(null),o=Object(ue.a)(c,2),i=o[0],m=o[1],d=Object(s.c)(e=>e.api.filter),u=Object(s.c)(e=>e.api.pagination),p=Object(s.c)(e=>e.api.order),E=Object(s.c)(e=>e.api.count),g=Object(s.c)(e=>e.api.loading),b=Object(s.c)(e=>e.auth.token),h=Object(s.c)(e=>e.api.dataList),y=Object(s.c)(e=>e.api.updated),O=Object(s.b)();if(h&&y){const e=[...h.results];let a=[];e.map((e,t)=>{const n=new Date(e.created_at),l="".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()),c=r.a.createElement("div",{className:"actionContainer"},r.a.createElement("div",{className:"actionBtn",onClick:()=>O(be(8,{id:e.id,name:e.name,state:e.state}))},r.a.createElement("span",null,"Cambiar estado"),r.a.createElement("i",{className:"material-icons"},"edit")));delete e.created_at;const o=Object(de.a)({},e,{actions:c,created_at:l});a.push(o)}),l(a),O({type:"API_UPDATED"})}const k=(e,a)=>{switch(e){case"search":O(A(a));break;case"pagination":O(_(a));break;case"order":O(S(a));break;default:return}};r.a.useEffect(()=>{O(T(0,b,2,d,u,p))},[d,u,p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a.Search,{onChange:e=>{return a=e.target.value,i&&clearTimeout(i),void m(setTimeout((function(e){k("search",e)}),1500,a));var a}}),r.a.createElement(ge.a,{dataSource:n,rowKey:"id",onChange:(e,a,t)=>{if(u!==e.current)k("pagination",e.current);else{const e="".concat("descend"===t.order?"-":"").concat(t.field);k("order",e)}},pagination:{pageSize:20,total:E},style:{overflow:"auto"},loading:g},r.a.createElement(ge.a.Column,{title:"Fecha",dataIndex:"created_at",key:"created_at",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Nombre",dataIndex:"name",key:"name",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Estado",dataIndex:"state",key:"state",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Acciones",dataIndex:"actions",key:"actions"})))};t(433);var Oe=e=>{const a=r.a.useState([]),t=Object(ue.a)(a,2),n=t[0],l=t[1],c=r.a.useState(null),o=Object(ue.a)(c,2),i=o[0],m=o[1],d=Object(s.c)(e=>e.api.filter),u=Object(s.c)(e=>e.api.pagination),p=Object(s.c)(e=>e.api.order),E=Object(s.c)(e=>e.api.count),g=Object(s.c)(e=>e.api.loading),b=Object(s.c)(e=>e.auth.token),h=Object(s.c)(e=>e.api.dataList),y=Object(s.c)(e=>e.api.updated),O=Object(s.b)();if(h&&y){const e=[...h.results];let a=[];e.map((e,t)=>{const n=new Date(e.created_at),l="".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()),c=e.additional.cost,o=e.additional.article,i=e.additional.gross,s=e.additional.net,m=r.a.createElement("div",{className:"actionContainer"},r.a.createElement("div",{className:"actionBtn",onClick:()=>O(be(5,{id:e.id,type:3}))},r.a.createElement("span",null,"Borrar venta"),r.a.createElement("i",{className:"material-icons"},"cancel")));delete e.created_at;const d=Object(de.a)({},e,{cost:c,name:o,gross:i,net:s,actions:m,created_at:l});a.push(d)}),l(a),O({type:"API_UPDATED"})}const k=(e,a)=>{switch(e){case"search":O(A(a));break;case"pagination":O(_(a));break;case"order":O(S(a));break;default:return}};r.a.useEffect(()=>{O(T(0,b,3,d,u,p))},[d,u,p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a.Search,{onChange:e=>{return a=e.target.value,i&&clearTimeout(i),void m(setTimeout((function(e){k("search",e)}),1500,a));var a}}),r.a.createElement(ge.a,{dataSource:n,rowKey:"id",onChange:(e,a,t)=>{if(u!==e.current)k("pagination",e.current);else{const e="".concat("descend"===t.order?"-":"").concat(t.field);k("order",e)}},pagination:{pageSize:20,total:E},style:{overflow:"auto"},loading:g},r.a.createElement(ge.a.Column,{title:"Nombre",dataIndex:"name",key:"name",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Cantidad",dataIndex:"quantity",key:"sku",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Fecha",dataIndex:"created_at",key:"created_at",sorter:!0}),r.a.createElement(ge.a.Column,{title:"Costo",dataIndex:"cost",key:"cost_price",sorter:!1}),r.a.createElement(ge.a.Column,{title:"Precio",dataIndex:"price",key:"sell_price",sorter:!1}),r.a.createElement(ge.a.Column,{title:"Bruto",dataIndex:"gross",key:"gross",sorter:!1}),r.a.createElement(ge.a.Column,{title:"Neto",dataIndex:"net",key:"net",sorter:!1}),r.a.createElement(ge.a.Column,{title:"Acciones",dataIndex:"actions",key:"actions"})))};const ke=[{title:"Nombre",dataIndex:"username",sorter:!0},{title:"Fecha",dataIndex:"date_joined",sorter:!0},{title:"Rol",dataIndex:"role"},{title:"Acciones",dataIndex:"actions"}];var fe=e=>{const a=r.a.useState([]),t=Object(ue.a)(a,2),n=t[0],l=t[1],c=r.a.useState(null),o=Object(ue.a)(c,2),i=o[0],m=o[1],d=Object(s.c)(e=>e.api.filter),u=Object(s.c)(e=>e.api.pagination),p=Object(s.c)(e=>e.api.order),E=Object(s.c)(e=>e.api.count),g=Object(s.c)(e=>e.api.loading),b=Object(s.c)(e=>e.auth.token),h=Object(s.c)(e=>e.api.dataList),y=Object(s.c)(e=>e.api.updated),O=Object(s.b)();if(h&&y){const e=[...h.results];let a=[],t=0,n=0;e.map((e,l)=>{const c=new Date(e.date_joined),o="".concat(c.getDate(),"/").concat(c.getMonth()+1,"/").concat(c.getFullYear()),i=r.a.createElement("div",{className:"actionContainer"},r.a.createElement("div",{className:"actionBtn",onClick:()=>O(be(5,{id:e.pk,type:4}))},r.a.createElement("span",null,"Borrar articulo"),r.a.createElement("i",{className:"material-icons"},"cancel")));delete e.date_joined;const s=e.is_staff?"Admin":"Vendedor",m=Object(de.a)({},e,{actions:i,date_joined:o,role:s});a.push(m),t+=e.quantity,n+=parseFloat(e.cost)*parseInt(e.quantity)}),l(a),O({type:"API_UPDATED"})}const k=(e,a)=>{switch(e){case"search":O(A(a));break;case"pagination":O(_(a));break;case"order":O(S(a));break;default:return}};r.a.useEffect(()=>{O(T(0,b,4,d,u,p))},[d,u,p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a.Search,{onChange:e=>{return a=e.target.value,i&&clearTimeout(i),void m(setTimeout((function(e){k("search",e)}),1500,a));var a}}),r.a.createElement(ge.a,{dataSource:n,columns:ke,rowKey:"id",onChange:(e,a,t)=>{if(u!==e.current)k("pagination",e.current);else{const e="".concat("descend"===t.order?"-":"").concat(t.field);k("order",e)}},pagination:{pageSize:20,total:E},style:{overflow:"auto"},loading:g}),r.a.createElement("span",{onClick:()=>O(be(9)),className:"floatingBtn"},"+"))},ve=t(509),je=t(506),Ie=t(225);var Ce=()=>{const e=r.a.useState(""),a=Object(ue.a)(e,2),t=a[0],n=(a[1],r.a.useState({})),l=Object(ue.a)(n,2),c=l[0],o=l[1],i=Object(s.c)(e=>e.api.token),m=Object(s.c)(e=>e.api.earnings),d=Object(s.c)(e=>e.api.updated),u=Object(s.b)();if(m&&d){o({labels:m.labels,datasets:[{label:"Ganancias",data:m.earnings,backgroundColor:["rgba(0, 255, 0, 0.2)"],borderColor:["rgba(0, 255, 0, 0.2)"],borderWidth:1},{label:"Cantidad",data:m.quantity,backgroundColor:["rgba(0, 0, 255, 0.2)"],borderColor:["rgba(0, 0, 255, 0.2)"],borderWidth:1}]}),u({type:"API_UPDATED"})}return r.a.createElement("div",{width:"100%"},r.a.createElement(ve.a.Title,null,"Analytics"),r.a.createElement(ve.a.Paragraph,null,"Aqui podras ver todas las estadisticas de tus negocios. Para generar ganancias por favor selecciona un rango de fechas"),r.a.createElement(ve.a.Title,{level:4},"Calcular ganancias"),r.a.createElement(je.a.RangePicker,{onChange:(e,a)=>{console.log(e,a),a[0]&&a[1]&&u(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(e)}};I.a.post("http://127.0.0.1:8000/api/getEarnings",a,n).then(e=>{t(N(e.data))}).catch(e=>{t(D(e.response.data))})})(i,{dateFrom:a[0],dateTo:a[1]}))},picker:t}),r.a.createElement(Ie.a,{data:c}),r.a.createElement("p",{style:{marginTop:"2rem"}},m?"Las ganancias totales fueron $".concat(m.earnings_total," de ").concat(m.quantity_total," articulos vendidos"):null))},Te=t(223),xe=t(510),Ae=t(520);t(478);var _e=e=>{const a=Object(s.c)(e=>e.auth.loading),t=Object(s.c)(e=>e.auth.error),n=(Object(s.c)(e=>e.auth.token),Object(s.b)());return t&&pe.a.error("He ocurrido un error, por favor intente de nuevo",5),r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"loginForm"},r.a.createElement("div",{className:"loginTitle"}),a?r.a.createElement(Te.a,{size:"large"}):r.a.createElement(xe.a,{onFinish:e=>{var a,t;n((a=e.username,t=e.password,e=>{e({type:"AUTH_START"}),I.a.post("http://127.0.0.1:8000/rest-auth/login/",{username:a,password:t}).then(a=>{const t=a.data.key,n=new Date((new Date).getTime()+36e6),r={headers:{Authorization:"Token ".concat(t)}};localStorage.setItem("token",t),localStorage.setItem("expirationDate",n),I.a.post("http://127.0.0.1:8000/api/getUser",{token:t},r).then(a=>{localStorage.setItem("username",a.data.username),localStorage.setItem("admin",a.data.is_staff),e(z(t,a.data.username,a.data.is_staff)),e(H(36e3))})}).catch(a=>{e(G(a))})}))}},r.a.createElement(xe.a.Item,{name:"username",rules:[{required:!0,message:"Por favor ingresa tu usuario!"}]},r.a.createElement(Ee.a,{prefix:r.a.createElement(y.a,{style:{color:"rgba(0,0,0,.25)",verticalAlign:"baseline"}}),placeholder:"Usuario"})),r.a.createElement(xe.a.Item,{name:"password",rules:[{required:!0,message:"Por favor ingresa tu clave!"}]},r.a.createElement(Ee.a.Password,{prefix:r.a.createElement(Ae.a,{style:{color:"rgba(0,0,0,.25)",verticalAlign:"baseline"}}),placeholder:"Contrase\xf1a"})),r.a.createElement(xe.a.Item,{style:{width:"100%"}},r.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Ingresar")))))};var Se=e=>{const a=Object(s.c)(e=>e.auth.token),t=Object(s.c)(e=>e.auth.admin);return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(o.a,null,r.a.createElement(me,null,r.a.createElement(i.a,{exact:!0,path:"/",component:he}),"true"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{exact:!0,path:"/admin",component:fe}),r.a.createElement(i.a,{exact:!0,path:"/orders",component:ye}),r.a.createElement(i.a,{exact:!0,path:"/history",component:Oe}),r.a.createElement(i.a,{exact:!0,path:"/analytics",component:Ce})," "):null)):r.a.createElement(_e,null))},we=(t(479),t(508)),De=t(511),Pe=t(507),Le=t(521);var Ne=()=>{const e=Object(s.b)(),a=r.a.useState(null),t=Object(ue.a)(a,2),n=t[0],l=t[1],c=Object(s.c)(e=>e.modal.payload),o=(Object(s.c)(e=>e.api.error),Object(s.c)(e=>e.auth.token)),i=Object(s.c)(e=>e.api.dataList),m={beforeUpload:e=>(l(e),!1)};return r.a.createElement(xe.a,{style:{margin:"16px"},onFinish:a=>{let t=new FormData;for(var r in a.image||delete a.image,a)t.append(r,a[r]);console.log("Esto seria ",a,n),n&&t.set("image",n,"".concat(encodeURI(a.name),".png")),c?(console.log("Update: ",c.id,a,o),e(x(0,c.id,a,o)),e({type:"MODAL_CLOSE"})):(e(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(a),"Content-Type":"multipart/form-data"}};I.a.post("http://127.0.0.1:8000/api/articles/",e,n).then(e=>{t(T(0,a,0))}).catch(e=>{t(D(e.response.data))})})(t,o)),e({type:"MODAL_CLOSE"}))},layout:"vertical",initialValues:c?i.results[c.key]:null},c?r.a.createElement("h2",null,"Editar articulo"):r.a.createElement("h2",null,"Agregar articulo nuevo"),r.a.createElement(xe.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,message:"Por favor ingresa un nombre"}]},r.a.createElement(Ee.a,null)),r.a.createElement(xe.a.Item,{label:"SKU",name:"sku",rules:[{required:!0,message:"Por favor ingresa un SKU"}]},r.a.createElement(Ee.a,null)),r.a.createElement(xe.a.Item,{label:"Ubicacion",name:"location",rules:[{required:!0,message:"Por favor ingresa una ubicaci\xf3n"}]},r.a.createElement(Ee.a,null)),c?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a.Item,{label:"Costo",name:"cost",rules:[{required:!0,message:"Por favor ingresa un costo"}]},r.a.createElement(De.a,{min:0,max:1e5,step:.1,formatter:e=>"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),style:{width:"100%"}})),r.a.createElement(xe.a.Item,{label:"Cantidad",name:"quantity",rules:[{required:!0,message:"Por favor ingresa una cantidad"}]},r.a.createElement(De.a,{min:0,max:5e3,style:{width:"100%"}}))," "),r.a.createElement(xe.a.Item,{label:"Precio sugerido",name:"suggested_price",rules:[{required:!0,message:"Por favor ingresa un precio"}]},r.a.createElement(De.a,{min:0,max:1e5,step:.1,formatter:e=>"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),style:{width:"100%"}})),r.a.createElement(xe.a.Item,{label:"Link",name:"link"},r.a.createElement(Ee.a,null)),c?null:r.a.createElement(xe.a.Item,{name:"image",label:"Image",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList},r.a.createElement(Pe.a,Object.assign({},m,{multiple:!1}),r.a.createElement(u.a,null,r.a.createElement(Le.a,null)," Click para subir imagen"))),r.a.createElement(xe.a.Item,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},c?"Editar":"Crear")))},Re=t(504);var Fe=()=>{const e=Object(s.c)(e=>e.modal.payload),a=Object(s.c)(e=>e.api.dataList),t=Object(s.c)(e=>e.auth.token),n=r.a.useState(null),l=Object(ue.a)(n,2),c=l[0],o=l[1],i=Object(s.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Vender articulo"),a.results[e.key]?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Estas por vender: ",a.results[e.key].name),r.a.createElement("p",null,"Stock disponible: ",a.results[e.key].quantity),r.a.createElement("p",null,"Costo de compra: ",a.results[e.key].cost),r.a.createElement("p",null,"Precio sugerido: ",a.results[e.key].suggested_price)):null,r.a.createElement(xe.a,{onFinish:a=>{const n=a.switch;delete a.switch;const r=Object(de.a)({},a,{article:e.id});i(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(a)}};I.a.post("http://127.0.0.1:8000/api/sales/",e,n).then(e=>{t(T(0,a,0))}).catch(e=>{t(D(e.response.data))})})(r,t)),n&&i(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(a)}};I.a.post("http://127.0.0.1:8000/api/orders/",e,n).then(e=>{console.log(e)}).catch(e=>{t(D(e.response.data))})})({article:e.id},t)),i({type:"MODAL_CLOSE"})},layout:"vertical"},r.a.createElement(xe.a.Item,{label:"Cantidad",name:"quantity",rules:[{required:!0,message:"Por favor ingresa una cantidad"}]},r.a.createElement(De.a,{onChange:e=>o(e),min:0,max:a.results[e.key]?parseInt(a.results[e.key].quantity):5e3,style:{width:"100%"}})),r.a.createElement(xe.a.Item,{label:"Precio",name:"price",rules:[{required:!0,message:"Por favor ingresa un precio"}]},r.a.createElement(De.a,{min:0,max:1e5,step:.1,style:{width:"100%"}})),a.results[e.key].quantity===c?r.a.createElement(xe.a.Item,{name:"switch",label:"Crear pedido",valuePropName:"checked"},r.a.createElement(Re.a,null)):null,r.a.createElement(xe.a.Item,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Aceptar"))))};var Ue=e=>{const a=Object(s.c)(e=>e.modal.payload),t=Object(s.c)(e=>e.auth.token),n=Object(s.b)();return r.a.useEffect(()=>{},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Agregar Stock"),r.a.createElement(xe.a,{onFinish:e=>{if(a){const r=Object(de.a)({},e,{article:a});console.log("Received values of form: ",e,a),n(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(a)}};I.a.post("http://127.0.0.1:8000/api/stocks/",e,n).then(e=>{t(T(0,a,0))}).catch(e=>{t(D(e.response.data))})})(r,t)),n({type:"MODAL_CLOSE"})}},layout:"inline"},r.a.createElement(xe.a.Item,{label:"Cantidad",name:"quantity",rules:[{required:!0,message:"Por favor ingresa una cantidad"}]},r.a.createElement(De.a,{min:0,max:1e5})),r.a.createElement(xe.a.Item,{label:"Costo",name:"cost",rules:[{required:!0,message:"Por favor ingresa un costo"}]},r.a.createElement(De.a,{min:0,max:1e5,step:.1})),r.a.createElement(xe.a.Item,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit"},"Crear"))))};var qe=()=>{const e=Object(s.c)(e=>e.modal.payload),a=Object(s.c)(e=>e.api.dataList),t=r.a.useState(null),n=Object(ue.a)(t,2),l=n[0],c=n[1];if(a&&!l){let t=[];a.results[e].stock_list.map(e=>{const a=new Date(e.created_at),n="".concat(a.getDate(),"/").concat(a.getMonth()+1,"/").concat(a.getFullYear());t.push(Object(de.a)({},e,{created_at:n}))}),c(t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Listado de stock"),r.a.createElement("h5",null,"Articulo: ",a.results[e].name),r.a.createElement(ge.a,{size:"small",dataSource:l,rowKey:"id"},r.a.createElement(ge.a.Column,{title:"Costo",dataIndex:"cost",key:"cost"}),r.a.createElement(ge.a.Column,{title:"Cantidad",dataIndex:"quantity",key:"quantity"}),r.a.createElement(ge.a.Column,{title:"Fecha",dataIndex:"created_at",key:"created_at"})))};var Be=e=>{const a=Object(s.b)(),t=Object(s.c)(e=>e.modal.payload),n=Object(s.c)(e=>e.auth.token),l=Object(s.c)(e=>e.api.error);t&&console.log("go fuck yourself ",t);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Borrar articulo"),r.a.createElement(ve.a,{style:{marginBottom:"1rem"}},"\xbfEstas seguro que deseas hacer esto?"),r.a.createElement("div",null,r.a.createElement(u.a,{onClick:()=>a({type:"MODAL_CLOSE"})},"Cancelar"),r.a.createElement(u.a,{type:"primary",style:{backgroundColor:"red",borderColor:"#ccc"},onClick:()=>(()=>{const e=4!=t.type?{status:!1}:{is_active:!1};a(x(t.type,t.id,e,n)),a({type:"MODAL_CLOSE"}),l||pe.a.success("Se ha borrado el articulo exitosamente",1)})()},"Confirmar")))},ze=t(132);const Ge={NewArticle:Ne,NewSell:Fe,NewStock:Ue,ListStock:qe,Confirm:Be,Image:()=>{const e=Object(s.c)(e=>e.modal.payload);return r.a.createElement("img",{src:e,width:"100%",height:"100%"})},UpdateOrder:()=>{const e=Object(s.c)(e=>e.modal.payload),a=(Object(s.c)(e=>e.api.dataList),Object(s.c)(e=>e.auth.token)),t=Object(s.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Cambiar estado de Pedido"),e.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Pedido: ",e.name),r.a.createElement("p",null,"Estado actual: ",e.state)):null,r.a.createElement(xe.a,{onFinish:n=>{t(x(2,e.id,n,a)),t({type:"MODAL_CLOSE"})},layout:"vertical"},r.a.createElement(xe.a.Item,{name:"state"},r.a.createElement(ze.a.Group,null,r.a.createElement(ze.a,{value:"BORRADO"},"BORRADO"),r.a.createElement(ze.a,{value:"PENDIENTE"},"PENDIENTE"),r.a.createElement(ze.a,{value:"PEDIDO"},"PEDIDO"),r.a.createElement(ze.a,{value:"LLEGO"},"LLEGO"))),r.a.createElement(xe.a.Item,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Aceptar"))))},NewUser:()=>{Object(s.c)(e=>e.modal.payload),Object(s.c)(e=>e.api.dataList);const e=Object(s.c)(e=>e.auth.token),a=r.a.useState(null),t=Object(ue.a)(a,2),n=(t[0],t[1],Object(s.b)());return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Crear nueva cuenta"),r.a.createElement(xe.a,{onFinish:a=>{n(((e,a)=>t=>{const n={headers:{Authorization:"Token ".concat(a)}};I.a.post("http://127.0.0.1:8000/rest-auth/registration/",e,n).then(e=>{t(T(0,a,4))}).catch(e=>{t(D(e.response.data))})})(a,e)),n({type:"MODAL_CLOSE"})},layout:"vertical"},r.a.createElement(xe.a.Item,{label:"Usuario",name:"username",rules:[{required:!0,message:"Por favor ingresa un usuario"}]},r.a.createElement(Ee.a,{style:{width:"100%"}})),r.a.createElement(xe.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Por favor ingresa un email"}]},r.a.createElement(Ee.a,{style:{width:"100%"}})),r.a.createElement(xe.a.Item,{label:"Contrase\xf1a",name:"password1",rules:[{required:!0,message:"Por favor ingresa una contrase\xf1a"}]},r.a.createElement(Ee.a.Password,{prefix:r.a.createElement(Ae.a,{style:{color:"rgba(0,0,0,.25)",verticalAlign:"baseline"}})})),r.a.createElement(xe.a.Item,{label:"Repite la contrase\xf1a",name:"password2",rules:[{required:!0,message:"Por favor repite tu contrase\xf1a"}]},r.a.createElement(Ee.a.Password,{prefix:r.a.createElement(Ae.a,{style:{color:"rgba(0,0,0,.25)",verticalAlign:"baseline"}})})),r.a.createElement(xe.a.Item,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Aceptar"))))}};const Me={1:Ge.NewArticle,2:Ge.NewSell,3:Ge.NewStock,4:Ge.ListStock,5:Ge.Confirm,6:Ge.Detail,7:Ge.Image,8:Ge.UpdateOrder,9:Ge.NewUser};var He=e=>{const a=Object(s.b)(),t=Object(s.c)(e=>e.modal.modalID),n=Object(s.c)(e=>e.modal.isOpen),l=Object(s.c)(e=>e.modal.modalTitle),c=Me[t];return r.a.createElement(we.a,{style:{top:20},title:l,visible:n,onCancel:()=>a({type:"MODAL_CLOSE"}),footer:null,okText:"Aceptar",cancelText:"Cancelar"},t?r.a.createElement(c,null):null)};var Ke=e=>{const a=Object(s.b)();return Object(n.useEffect)(()=>{a(K())}),r.a.createElement(r.a.Fragment,null,r.a.createElement(He,null),r.a.createElement(Se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=t(76),We=t(245);t(501);const Ve=(e,a)=>Object(de.a)({},e,{},a),Ye={token:null,error:null,loading:!1,username:null,admin:null};var Xe=(e=Ye,a)=>{switch(a.type){case"AUTH_START":return((e,a)=>Ve(e,{error:null,loading:!0}))(e);case"AUTH_SUCESS":return((e,a)=>Ve(e,{token:a.token,error:null,loading:!1,admin:a.is_admin,username:a.username}))(e,a);case"AUTH_FAIL":return((e,a)=>Ve(e,{error:a.error,loading:!1}))(e,a);case"AUTH_LOGOUT":return((e,a)=>Ve(e,{token:null}))(e);default:return e}};const Je={isOpen:!1,modalID:null};var Qe=(e=Je,a)=>{switch(a.type){case"MODAL_OPEN":return((e,a)=>(console.log("hola ",a),Ve(e,{isOpen:!0,modalID:a.modalID,payload:a.payload})))(e,a);case"MODAL_CLOSE":return((e,a)=>Ve(e,{isOpen:!1,modalID:null}))(e);default:return e}};const Ze={title:null,selectedTab:1,loading:!1,error:null,dataList:null,dataElement:null,columns:null,updated:!0,count:0,filter:null,pagination:null,order:null,stockTotal:0,priceTotal:0,earnings:null};var ea=(e=Ze,a)=>{switch(a.type){case"API_START":return((e,a)=>Ve(e,{loading:!0}))(e);case"API_SUCCESS":return((e,a)=>{const t=a.data.count?a.data.count:0;return Ve(e,{loading:!1,error:null,dataList:a.data,updated:!0,count:t})})(e,a);case"API_FAIL":return((e,a)=>Ve(e,{error:a.error,loading:!1}))(e,a);case"API_UPDATED":return((e,a)=>Ve(e,{updated:!1}))(e);case"API_GET_TOTALS":return((e,a)=>Ve(e,{stockTotal:a.stockTotal,priceTotal:a.priceTotal}))(e,a);case"API_GET_EARNINGS":return((e,a)=>Ve(e,{earnings:a.earnings,updated:!0}))(e,a);case"UPDATE_FILTER":return((e,a)=>Ve(e,{filter:a.filter}))(e,a);case"UPDATE_PAGINATION":return((e,a)=>Ve(e,{pagination:a.pagination}))(e,a);case"UPDATE_ORDER":return((e,a)=>Ve(e,{order:a.order}))(e,a);case"RESET_ORDER_FILTER":return((e,a)=>Ve(e,{filter:null,pagination:null,order:null}))(e);case"TOGGLE_SIDEDRAWER":return((e,a)=>Ve(e,{sideDrawer:!e.sideDrawer}))(e);default:return e}};const aa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$e.d,ta=Object($e.c)({auth:Xe,modal:Qe,api:ea}),na=Object($e.e)(ta,aa(Object($e.a)(We.a))),ra=r.a.createElement(s.a,{store:na},r.a.createElement(Ke,null));c.a.render(ra,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[250,1,2]]]);
//# sourceMappingURL=main.3fb070cc.chunk.js.map